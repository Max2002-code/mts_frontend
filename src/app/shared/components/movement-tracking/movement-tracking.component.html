<div class="tracking-dashboard">

  <!-- SINISTRA -->
  <div class="left-panel">
    <mat-card class="search-card elevated">
      <mat-card-title>üîç Tracciamento libro</mat-card-title>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Titolo libro</mat-label>
        <input matInput [(ngModel)]="query" placeholder="Es. Harry Potter">
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        class="full-width"
        (click)="search()"
      >
        Cerca
      </button>

      <div *ngIf="searched && !movement" class="no-results">
        Libro non trovato
      </div>
    </mat-card>
  </div>

  <!-- DESTRA -->
  <div class="right-panel" *ngIf="movement">
    <mat-card class="book-card elevated">

      <!-- HEADER -->
      <div class="book-header">
        <div>
          <h2>{{ movement.bookTitle }}</h2>
          <span class="status-badge"
            [ngClass]="movement.status | lowercase">
            {{ movement.status }}
          </span>
        </div>
      </div>

      <!-- CRONOLOGIA -->
      <mat-card-content>
        <h4>üìú Cronologia</h4>

        <div *ngIf="movement.history?.length; else noHistory">
          <div class="timeline">
            <div class="timeline-item" *ngFor="let h of movement.history">
              <div class="dot"></div>
              <div class="content">
                <strong>{{ h.date | date: 'dd/MM/yyyy' }}</strong>
                <p>{{ h.description }}</p>
              </div>
            </div>
          </div>
        </div>

        <ng-template #noHistory>
          <p class="empty">Nessuna cronologia disponibile</p>
        </ng-template>
      </mat-card-content>

      <!-- AZIONI -->
      <mat-divider></mat-divider>

      <mat-card-content class="actions">
        <mat-form-field appearance="outline">
          <mat-label>Data arrivo</mat-label>
          <input matInput type="date" [(ngModel)]="arrivalInput">
        </mat-form-field>

        <button mat-raised-button color="accent" (click)="setArrival()">
          Segna come arrivato
        </button>
      </mat-card-content>

    </mat-card>
  </div>

</div>
